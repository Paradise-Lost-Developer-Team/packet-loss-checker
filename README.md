# VALORANT パケットロス追跡・解析ツール

VALORANTのネットワーク品質を監視し、パケットロスやレイテンシーの問題を分析するPythonツールです。

## 🎯 主な機能

- **リアルタイムパケットロス監視**: VALORANTサーバーへの継続的なping監視
- **一般サービス比較テスト**: Discord、YouTube、Cloudflareなどとの比較で問題の原因を特定
- **多地域サポート**: 世界10地域のVALORANTサーバーに対応
- **詳細な統計分析**: パケットロス率、レイテンシー、ジッターの計算
- **問題の自動分析**: ネットワーク問題の検出と改善提案
- **原因特定機能**: VALORANTサーバー固有の問題か全般的なネットワーク問題かを判別
- **可視化機能**: グラフとチャートによる結果の視覚化
- **データエクスポート/インポート**: CSV/JSON形式での結果保存・読み込み
- **履歴データ分析**: 過去のテスト結果の再読み込みと分析

## 📊 対応リージョン

- Tokyo (Japan) 🇯🇵
- Seoul (Korea) 🇰🇷
- Sydney (Australia) 🇦🇺
- Singapore 🇸🇬
- Mumbai (India) 🇮🇳
- Hong Kong 🇭🇰
- Virginia (US East) 🇺🇸
- California (US West) 🇺🇸
- London (EU West) 🇬🇧
- Frankfurt (EU Central) 🇩🇪

## 🚀 インストール

### 必要な環境

- Python 3.8以上
- Windows/macOS/Linux

### セットアップ

```bash
# リポジトリをクローン
git clone https://github.com/Paradise-Lost-Developer-Team/packet-loss-checker.git
cd packet-loss-checker

# 依存関係をインストール
pip install -r requirements.txt
```

## 📖 使用方法

### 基本的な使用方法

```bash
python main.py
```

プログラムを実行すると、以下のメニューが表示されます：

1. **リージョン選択** - 監視するVALORANTサーバーの地域を選択
2. **パケットロステスト開始** - 指定した時間でテストを実行
3. **結果表示** - 統計情報と問題分析を表示
4. **結果保存** - CSV/JSON形式でデータを保存
5. **グラフ作成** - 可視化グラフを生成
6. **ネットワーク情報表示** - ローカルネットワーク情報を表示

### 使用例

#### 1. 基本的なテスト

1. リージョン選択で「Tokyo (Japan)」を選択
2. パケットロステスト開始で「5」分間のテストを実行
3. 結果表示で統計情報を確認

#### 2. 詳細分析

1. 長時間テスト（30分以上）を実行
2. 結果をCSV/JSONで保存
3. グラフを作成してレイテンシーの推移を確認

### 包括的テスト（推奨）

最も詳細な分析を行うには、包括的テストを実行してください：

```bash
python main.py
# メニューから「4. 包括的テスト」を選択
```

このテストでは以下を実行します：

1. **一般サービステスト**: Discord、YouTube、Cloudflareなどへの接続品質を測定
2. **VALORANTサーバーテスト**: 選択したリージョンのVALORANTサーバーを測定
3. **比較分析**: 両方の結果を比較して問題の原因を特定

### 個別テスト

#### VALORANTサーバーのみテスト

```bash
python main.py
# メニューから「2. VALORANTサーバーテスト」を選択
```

#### 一般サービスのみテスト

```bash
python main.py
# メニューから「3. 一般サービステスト」を選択
```

### 問題の原因分析

プログラムは自動的に以下を判別します：

- 🎯 **VALORANTサーバー固有の問題**: VALORANTサーバーのみでパケットロスが発生
- 🌐 **全般的なネットワーク問題**: すべてのサービスで問題が発生
- 🛣️ **ネットワーク経路の問題**: 特定の経路でのみ問題が発生
- ⏱️ **レイテンシー問題**: パケットロスはないが、遅延が大きい

## 📈 出力される情報

### 統計情報

- **総パケット数**: 送信したpingの総数
- **ロストパケット数**: 失敗したpingの数
- **パケットロス率**: 失敗率のパーセンテージ
- **平均レイテンシー**: 応答時間の平均値
- **最小/最大レイテンシー**: 最速/最遅の応答時間
- **ジッター**: レイテンシーの変動（標準偏差）

### 問題分析

プログラムは以下の問題を自動検出します：

- **高いパケットロス率** (5%以上)
- **高いレイテンシー** (100ms以上)
- **不安定な接続** (高ジッター)

### 改善提案

検出された問題に対して具体的な改善策を提案：

- ネットワーク接続の確認
- ルーターの再起動
- 有線接続への変更
- ISPへの問い合わせ
- QoS設定の調整など

## 📊 可視化機能

生成されるグラフ：

1. **レイテンシーの時系列グラフ** - 時間経過による応答時間の変化
2. **サーバー別パケットロス率** - 各サーバーの信頼性比較
3. **レイテンシー分布ヒストグラム** - 応答時間の分布状況
4. **パフォーマンス比較** - サーバー間の性能比較

## 🔧 設定オプション

プログラム内で以下の設定を調整可能：

```python
# タイムアウト設定（秒）
timeout = 3.0

# ping間隔（秒）
interval = 1.0

# テスト時間（分）
duration_minutes = 10
```

## 📁 出力ファイル

### CSVファイル

詳細なping結果（タイムスタンプ、サーバー、レイテンシー、エラー状況）

### JSONファイル

統計情報とテスト概要（サーバー別統計、テスト期間、設定情報）

### PNGファイル

可視化グラフ（高解像度、300dpi）

## 🛠️ トラブルシューティング

### よくある問題

#### 1. pingが失敗する

原因: ファイアウォールまたは管理者権限の問題
解決策: 管理者権限でプログラムを実行

#### 2. グラフが表示されない

原因: matplotlibの設定問題
解決策: pip install matplotlib --upgrade

#### 3. パッケージインストールエラー

原因: Python環境の問題
解決策: 仮想環境の使用を推奨

## 🤝 貢献

バグ報告や機能要求は、GitHubのIssuesまでお願いします。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## ⚠️ 注意事項

- このツールは診断目的のみに使用してください
- 過度なping送信はサーバーに負荷をかける可能性があります
- 結果は参考値として使用し、ネットワーク問題の完全な診断には専門ツールを使用してください

## 🆕 更新履歴

### v1.0.0 (2025-06-25)

- 初回リリース
- 基本的なパケットロス監視機能
- 10地域のVALORANTサーバー対応
- リアルタイム統計表示
- グラフ可視化機能

### データの保存・読み込み

#### 結果の保存

テスト結果は自動的に以下の形式で保存されます：

```bash
python main.py
# メニューから「7. 結果保存」を選択
```

保存されるファイル：

- `ファイル名.csv`: 詳細な ping データ（タイムスタンプ、サーバー、レイテンシー等）
- `ファイル名_stats.json`: 統計情報（パケットロス率、平均レイテンシー等）

#### データのインポート

過去のテスト結果を再読み込みして分析できます：

```bash
python main.py
# メニューから「8. データインポート」を選択
```

**インポートオプション：**

1. **ファイル名を直接入力**: 特定のファイルを指定
2. **最新ファイルを自動選択**: 最も新しいテストデータを自動選択
3. **ファイル一覧表示**: 利用可能なファイルの一覧を表示

**対応ファイル形式：**

- `.csv`: 詳細データ（完全な再現が可能）
- `_stats.json`: 統計データのみ（概要表示）

#### 履歴データの活用

インポートしたデータで以下が可能です：

- 過去の統計データの再表示
- グラフの再生成
- 他のテスト結果との比較
- 長期的なネットワーク品質の分析
